service:
  base-path: /v1/documentIndexes
  auth: true
  endpoints:
    createDocumentIndex:
      path: /createDocumentIndex
      docs: Create a search index over a set of related documents.
      method: POST
      request:
        name: CreateDocumentIndexRequest
        body:
          properties:
            indexName:
              type: string
              docs: A unique name for the document index.
            embeddingsModel:
              type: optional<string>
              docs: |
                The embeddings model to use for the document index. If not specified, Credal will use the default model.
            distanceMetric:
              type: optional<DistanceMetric>
              docs: |
                The distance metric to use for the document index. If not specified, Credal will use the default metric.
            metadataSchema:
              type: optional<MetadataSchema>
              docs: |
                The metadata schema to use for the document index. If not specified, Credal will use the default schema.
      response: CreateDocumentIndexResponse
      examples:
        - name: createDocumentIndexExample
          request:
            indexName: Customer Meeting Transcripts
            embeddingsModel: "text-embedding-ada-002"
            distanceMetric: EUCLIDEAN
            metadataSchema:
              fields:
                - name: customerName
                  type: STRING
                - name: meetingDate
                  type: DATETIME
          response:
            body:
              documentIndexId: 82e4b12a-6990-45d4-8ebd-85c00e030c24
    deleteDocumentIndex:
      path: /deleteDocumentIndex
      docs: Delete a document index given its ID.
      method: POST
      request:
        name: DeleteDocumentIndexRequest
        query-parameters:
          documentIndexId: uuid
      examples:
        - name: deleteDocumentIndexExample
          query-parameters:
            documentIndexId: 82e4b12a-6990-45d4-8ebd-85c00e030c24
    listDocumentsInIndex:
      path: /listDocumentsInIndex
      docs: List all documents in a document index.
      method: POST
      request:
        name: ListDocumentIndexRequest
        query-parameters:
          documentIndexId: uuid
      response: ListDocumentIndexResponse
      examples:
        - name: listDocumentsInIndexExample
          query-parameters:
            documentIndexId: 82e4b12a-6990-45d4-8ebd-85c00e030c24
          response:
            body:
              documents:
                - documentId: 82e4b12a-6990-45d4-8ebd-85c00e030c24
                  metadata:
                    customerName: Credal
                    meetingDate: "2023-11-06T23:03:42.056Z"
                - documentId: 4676d85d-6e8b-4503-8a71-bb2a8e763858
                  metadata:
                    customerName: ABC Corp
                    meetingDate: "2022-12-06T12:02:41.023Z"
types:
  ListDocumentIndexResponse:
    properties:
      documents:
        type: list<IndexedDocument>
        docs: The list of documents in the index.
  IndexedDocument:
    properties:
      documentId: uuid
      metadata: map<string, string>
  CreateDocumentIndexResponse:
    properties:
      documentIndexId: uuid
  MetadataSchema:
    properties:
      fields:
        type: list<MetadataField>
        docs: The list of metadata fields.
  MetadataField:
    properties:
      name: string
      type: DataType
  DataType:
    enum:
      - STRING
      - INT
      - DOUBLE
      - DATETIME
      - BOOLEAN
  DistanceMetric:
    enum:
      - EUCLIDEAN
      - COSINE
      - DOTPRODUCT
