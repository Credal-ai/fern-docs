imports:
  common: ./common.yml
service:
  base-path: /v0/documentCollections
  auth: true
  endpoints:
    addDocumentsToCollection:
      path: /addDocumentsToCollection
      docs: Add documents to a document collection. Note that the documents must already exist in the document catalog to use this endpoint. If you want to upload a new document to a collection, use the `uploadDocumentContents` endpoint.
      method: POST
      request:
        name: AddDocumentsToCollectionRequest
        body:
          properties:
            collectionId:
              type: uuid
              docs: The ID of the document collection you want to add to.
            resourceIdentifiers:
              type: list<common.ResourceIdentifier>
              docs: |
                The set of resource identifier for which you want to add to the collection.
      examples:
        - name: addDocumentsToCollectionExample
          request:
            collectionId: 82e4b12a-6990-45d4-8ebd-85c00e030c24
            resourceIdentifiers:
              # TODO add example of credal ID
              - type: external-resource-id
                externalResourceId: 170NrBm0Do7gdzvr54UvyslPVWkQFOA0lgNycFmdZJQr
                resourceType: GOOGLE_DRIVE_ITEM
              - type: external-resource-id
                externalResourceId: 398KAHdfkjsdf09r54UvyslPVWkQFOA0lOiu34in923
                resourceType: GOOGLE_DRIVE_ITEM

    removeDocumentsFromCollection:
      createCollection:
      availability: pre-release
      path: /removeDocumentsFromCollection
      docs: Remove documents from a collection
      method: DELETE
      request:
        name: RemoveDocumentsFromCollectionRequest
        body:
          properties:
            collectionId:
              type: uuid
              docs: The ID of the document collection you want to add to.
            resourceIdentifiers:
              type: list<common.ResourceIdentifier>
              docs: |
                The set of resource identifier for which you want to remove from the collection
      examples:
        - name: removeDocumentsFromCollectionExample
          request:
            collectionId: 82e4b12a-6990-45d4-8ebd-85c00e030c24
            resourceIdentifiers:
              # TODO add example of credal ID
              - type: external-resource-id
                externalResourceId: 170NrBm0Do7gdzvr54UvyslPVWkQFOA0lgNycFmdZJQr
                resourceType: GOOGLE_DRIVE_ITEM
              - type: external-resource-id
                externalResourceId: 398KAHdfkjsdf09r54UvyslPVWkQFOA0lOiu34in923
                resourceType: GOOGLE_DRIVE_ITEM

    createCollection:
      availability: pre-release
      path: /createCollection
      method: POST
      docs: Create a new copilot. The API key used will be added to the copilot for future Requests
      request:
        name: CreateCollectionRequest
        body:
          properties:
            name:
              type: string
              docs: |
                A descriptive name for the collection.
            description:
              type: string
              docs: |
                An in depth name for the copilot's function. Useful for routing requests to the right copilot.
            collaborators:
              type: list<common.Collaborator>
              docs: |
                A list of collaborator emails and roles that will have access to the copilot.
      response: CreateCollectionResponse
      examples:
        - name: Example0
          request:
            name: Customer Collection
            description: This collection is used to answer customer requests based on internal documentation.
            collaborators:
              - email: test@gmail.com
                role: editor
          response:
            body:
              collectionId: "ac20e6ba-0bae-11ef-b25a-efca73df4c3a"

    deleteCollection:
      availability: pre-release
      path: /deleteCollection
      method: DELETE
      docs: Delete the collection.
      request:
        name: DeleteCollectionRequest
        body:
          properties:
            collectionId: uuid
      response: DeleteCollectionResponse
      examples:
        - name: Example0
          request:
            collectionId: "ac20e6ba-0bae-11ef-b25a-efca73df4c3a"
          response:
            body:
              collectionId: "ac20e6ba-0bae-11ef-b25a-efca73df4c3a"

types:
  CreateCollectionResponse:
    properties:
      collectionId: uuid
  DeleteCollectionRequest:
    properties:
      collectionId: uuid
  DeleteCollectionResponse:
    properties:
      collectionId: uuid
