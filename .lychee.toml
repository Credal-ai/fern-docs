# lychee link checker configuration
# https://github.com/lycheeverse/lychee

# Accepted HTTP status codes — treat these as "link is alive"
#   200..=206  normal success range
#   429        rate-limited by the server; site is up, just throttling bots
accept = "200..=206,429"

# Only check http/https links — skip root-relative paths (/user-guide/...,
# /docs/assets/...) and relative file links that lychee can't resolve locally.
# Those are valid Fern site links; external URL reachability is all we care about.
scheme = ["https", "http"]

# Per-request timeout in seconds
timeout = 30

# Retry transient failures before marking a link broken
max_retries = 3

# Parallel requests (keep moderate to avoid triggering rate-limits)
max_concurrency = 10

# Exclude URLs matching these patterns (regex).
# These are intentionally skipped because they require auth, expire, or
# block headless clients — their breakage is not actionable in CI.
exclude = [
  # Google Docs / Drive require a Google login
  "^https://docs\\.google\\.com/",
  "^https://drive\\.google\\.com/",

  # SharePoint requires a Microsoft login
  "^https://.*\\.sharepoint\\.com/",

  # Zoom webinar registration links expire after the event
  "^https://.*zoom\\.us/webinar/",

  # YouTube and Loom embed URLs routinely return 403 to headless clients
  "^https://www\\.youtube\\.com/embed/",
  "^https://www\\.loom\\.com/embed/",
]
